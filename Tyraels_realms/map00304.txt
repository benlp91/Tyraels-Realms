REM Level 5 Bens campaign

LEVEL_VERSION(1)

SET_GENERATE_SPEED(400)

START_MONEY(ALL_PLAYERS,2500)

MAX_CREATURES(ALL_PLAYERS,15)

ADD_CREATURE_TO_POOL(SPIDER,4)
ADD_CREATURE_TO_POOL(TROLL,4)
ADD_CREATURE_TO_POOL(ORC,4)
ADD_CREATURE_TO_POOL(BILE_DEMON,3)
ADD_CREATURE_TO_POOL(FIREFLY,2)
ADD_CREATURE_TO_POOL(TENTACLE,2)
ADD_CREATURE_TO_POOL(HELL_HOUND,2)
ADD_CREATURE_TO_POOL(GOBLIN,2)
ADD_CREATURE_TO_POOL(SALAMANDER,2)

CREATURE_AVAILABLE(ALL_PLAYERS,SPIDER,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TROLL,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,TENTACLE,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,HELL_HOUND,1,1)
CREATURE_AVAILABLE(ALL_PLAYERS,BILE_DEMON,1,0)
CREATURE_AVAILABLE(ALL_PLAYERS,ORC,1,0)
CREATURE_AVAILABLE(PLAYER0,FIREFLY,1,0)
CREATURE_AVAILABLE(PLAYER0,GOBLIN,1,0)
CREATURE_AVAILABLE(PLAYER0,SALAMANDER,1,0)

ROOM_AVAILABLE(ALL_PLAYERS,TREASURE,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,LAIR,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,GARDEN,1,1)
ROOM_AVAILABLE(ALL_PLAYERS,TRAINING,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,RESEARCH,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,GUARD_POST,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,WORKSHOP,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,PRISON,3,0)
ROOM_AVAILABLE(ALL_PLAYERS,TORTURE,1,0)
ROOM_AVAILABLE(ALL_PLAYERS,BARRACKS,1,0)

MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HAND,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SLAP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_POSSESS,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_IMP,1,1)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SIGHT,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_SPEED,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_OBEY,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_CALL_TO_ARMS,1,0)
MAGIC_AVAILABLE(ALL_PLAYERS,POWER_HEAL_CREATURE,1,0)
MAGIC_AVAILABLE(PLAYER0,POWER_SIGHT,1,0)

TRAP_AVAILABLE(ALL_PLAYERS,POISON_GAS,1,0)
TRAP_AVAILABLE(ALL_PLAYERS,WORD_OF_POWER,1,0)

SET_CREATURE_INSTANCE(THIEF,4,NULL,1)
SET_CREATURE_INSTANCE(THIEF,7,INVISIBILITY,1)
SET_CREATURE_PROPERTY(HORNY,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(AVATAR,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(ANGEL,NO_IMPRISONMENT,1)
SET_CREATURE_PROPERTY(GUARD,NO_IMPRISONMENT,1)
SET_GAME_RULE(ImpWorkExperience,254)

DOOR_AVAILABLE(ALL_PLAYERS,BRACED,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,STEEL,1,0)
DOOR_AVAILABLE(ALL_PLAYERS,MAGIC,1,0)

REM "Damn! It seems King Arthur is resurrected. You can see Tyraels Brothers walking safely in their castle. Meanwhile the good Wizards have enchanted Tyrael. His powers are fading. Goal in this Realm is to kill the King and Tyraels Brothers."
DISPLAY_OBJECTIVE(18,ALL_PLAYERS)
REM "There's only one very well hidden Portal in this Realm, stay cautious."
DISPLAY_INFORMATION(19,ALL_PLAYERS)

REVEAL_MAP_LOCATION(PLAYER0,14,20)
REVEAL_MAP_LOCATION(PLAYER0,15,20)

SET_TIMER(PLAYER3,TIMER3)

IF(PLAYER3,TIMER3 > 150)
	PLAY_MESSAGE(PLAYER0,SPEECH,"strengthisgone.mp3")
ENDIF

IF(PLAYER3,TIMER3 > 500)
REM "The bewitched Tyrael has no control over his anger; at least we can calm him down with some gold."
DISPLAY_INFORMATION(20,ALL_PLAYERS)
ENDIF

if(player0, SPECIALKNIGHT == 0)
	if(player0, TYRAEL == 0)
		PLAY_MESSAGE(PLAYER0,SPEECH,"argh.mp3")
		lose_game
	ENDIF
ENDIF

IF(PLAYER0,TRAINING >= 1)
	PLAY_MESSAGE(PLAYER0,SPEECH,"training.mp3")
ENDIF

if(player0, TYRAEL == 1)
	PLAY_MESSAGE(PLAYER0,SPEECH,"look.mp3")
ENDIF

if(player0, FIREFLY == 1)
		REM "This Fly looks like a good supporter for the beginning."
		DISPLAY_INFORMATION(21, ALL_PLAYERS)
		ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,2,500)
ENDIF

if(player0, RESEARCH >= 1)
		ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,3,500)
ENDIF

IF_ACTION_POINT(1,PLAYER0)
	ADD_CREATURE_TO_LEVEL(PLAYER1,DARK_KNIGHT,10,1,10,1000)
	ADD_CREATURE_TO_LEVEL(PLAYER1,DARK_KNIGHT,11,1,10,1000)
	SET_OBJECT_CONFIGURATION(DARK_KNIGHT_STATUE,MaximumSize,0)
	SET_TIMER(PLAYER1,TIMER1)
	CHANGE_CREATURE_OWNER(PLAYER1,DARK_KNIGHT,ANYWHERE,PLAYER_GOOD)
	CHANGE_CREATURE_OWNER(PLAYER1,DARK_KNIGHT,ANYWHERE,PLAYER_GOOD)
	REM "The Avatars bundled their Power, turning every converted hero back to their side again if they come too close to the castle . They stolen your ability to build bridges aswell. Kill them or their heart to stop that."
	DISPLAY_OBJECTIVE(22,ALL_PLAYERS)
	ROOM_AVAILABLE(ALL_PLAYERS,BRIDGE,0,0)
	CHANGE_SLAB_TYPE(33,60,LAVA)
	CHANGE_SLAB_TYPE(34,60,LAVA)
	CHANGE_SLAB_TYPE(35,60,LAVA)
	CHANGE_SLAB_TYPE(36,60,LAVA)
	CHANGE_SLAB_TYPE(32,60,LAVA)
	CHANGE_SLAB_TYPE(31,60,LAVA)
	CHANGE_SLAB_TYPE(30,60,LAVA)

	CHANGE_SLAB_TYPE(33,61,LAVA)
	CHANGE_SLAB_TYPE(34,61,LAVA)
	CHANGE_SLAB_TYPE(35,61,LAVA)
	CHANGE_SLAB_TYPE(36,61,LAVA)
	CHANGE_SLAB_TYPE(32,61,LAVA)
	CHANGE_SLAB_TYPE(31,61,LAVA)
	CHANGE_SLAB_TYPE(30,61,LAVA)

	CHANGE_SLAB_TYPE(33,59,LAVA)
	CHANGE_SLAB_TYPE(34,59,LAVA)
	CHANGE_SLAB_TYPE(35,59,LAVA)
	CHANGE_SLAB_TYPE(36,59,LAVA)
	CHANGE_SLAB_TYPE(32,59,LAVA)
	CHANGE_SLAB_TYPE(31,59,LAVA)
	CHANGE_SLAB_TYPE(30,59,LAVA)
ENDIF


SET_FLAG(PLAYER2,FLAG1,0)

IF_ACTION_POINT(17,PLAYER0)
	PLAY_MESSAGE(PLAYER0,SPEECH,"silly031.mp3")
ENDIF

IF_ACTION_POINT(12,PLAYER0)
SET_FLAG(PLAYER2,FLAG1,1)
ENDIF

IF_ACTION_POINT(16,PLAYER0)
	PLAY_MESSAGE(PLAYER0,SPEECH,"misc009.mp3")
	ADD_CREATURE_TO_LEVEL(PLAYER_GOOD,THIEF,-1,2,3,500)
ENDIF

IF_ACTION_POINT(13,PLAYER0)
SET_FLAG(PLAYER2,FLAG1,1)
ENDIF

IF(PLAYER2,FLAG1 ==1)
	REM "Tyraels Brothers are preparing themselfs to kill you, watch out."
	DISPLAY_OBJECTIVE(23,ALL_PLAYERS)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe06.mp3")
	SET_TIMER(PLAYER3,TIMER1)
ENDIF

IF(PLAYER3,TIMER1 > 1000)
	SET_DOOR(UNLOCKED,72,49)
	SET_DOOR(UNLOCKED,71,55)
	SET_DOOR(UNLOCKED,72,60)
ENDIF

IF(PLAYER3,TIMER1 > 3500)
	SET_DOOR(UNLOCKED,71,65)
	SET_DOOR(UNLOCKED,72,71)
ENDIF

if(player_good, AVATAR == 5)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe07.mp3")
ENDIF

if(player_good, AVATAR == 4)
  	PLAY_MESSAGE(PLAYER0,SPEECH,"lvlspe08.mp3")
ENDIF


REM Count the creatures for the Sound to Play and Change the creatures owner


SET_FLAG(PLAYER1,FLAG1,1)

IF(PLAYER1,TIMER1 > 150)
	IF(PLAYER1,FLAG1 == 1)
		REM Count up all hero values to unique flags for action point 2
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,WIZARD,PLAYER_GOOD,FLAG0)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,FAIRY,PLAYER_GOOD,FLAG1)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,ARCHER,PLAYER_GOOD,FLAG2)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,WITCH,PLAYER_GOOD,FLAG3)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,MONK,PLAYER_GOOD,FLAG4)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,THIEF,PLAYER_GOOD,FLAG5)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,KNIGHT,PLAYER_GOOD,FLAG6)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,BARBARIAN,PLAYER_GOOD,FLAG7)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,ELF,PLAYER4,FLAG0)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,GIANT,PLAYER4,FLAG1)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,SAMURAI,PLAYER4,FLAG2)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,TIME_MAGE,PLAYER4,FLAG3)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(2,PLAYER0,DARK_MISTRESS,PLAYER4,FLAG4)

		REM Count up all hero values to unique flags for action point 21
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,WIZARD,PLAYER4,FLAG5)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,FAIRY,PLAYER4,FLAG6)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,ARCHER,PLAYER4,FLAG7)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,WITCH,PLAYER5,FLAG0)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,MONK,PLAYER5,FLAG1)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,THIEF,PLAYER5,FLAG2)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,KNIGHT,PLAYER5,FLAG3)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,BARBARIAN,PLAYER5,FLAG4)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,ELF,PLAYER5,FLAG5)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,GIANT,PLAYER5,FLAG6)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,SAMURAI,PLAYER5,FLAG7)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,TIME_MAGE,PLAYER6,FLAG0)
		NEXT_COMMAND_REUSABLE
		COUNT_CREATURES_AT_ACTION_POINT(21,PLAYER0,DARK_MISTRESS,PLAYER6,FLAG2)
		
		REM Now, put all the unique flag values above, into PLAYER0,FLAG2
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,SET,PLAYER_GOOD,FLAG0,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG1,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG2,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG3,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG4,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG5,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG6,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER_GOOD,FLAG7,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG0,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG1,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG2,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG3,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG4,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG5,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG6,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER4,FLAG7,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG0,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG1,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG2,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG3,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG4,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG5,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG6,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER5,FLAG7,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER6,FLAG0,0)
		NEXT_COMMAND_REUSABLE
		COMPUTE_FLAG(PLAYER0,FLAG2,INCREASE,PLAYER7,FLAG1,0)
		
		REM	Change all red heroes at AP2 to white, unrelated to the counts above
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,FAIRY,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ARCHER,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WIZARD,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WITCH,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,MONK,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,THIEF,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,KNIGHT,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,BARBARIAN,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ELF,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,GIANT,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,SAMURAI,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,TIME_MAGE,AT_ACTION_POINT[2],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,DARK_MISTRESS,AT_ACTION_POINT[2],PLAYER_GOOD)

		REM	Change all red heroes at AP21 to white, unrelated to the counts above
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,FAIRY,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ARCHER,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WIZARD,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,WITCH,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,MONK,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,THIEF,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,KNIGHT,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,BARBARIAN,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,ELF,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,GIANT,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,SAMURAI,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,TIME_MAGE,AT_ACTION_POINT[21],PLAYER_GOOD)
		NEXT_COMMAND_REUSABLE
		CHANGE_CREATURE_OWNER(PLAYER0,DARK_MISTRESS,AT_ACTION_POINT[21],PLAYER_GOOD)
	ENDIF
ENDIF

REM for testing for ben, show the amount of sounds we will make
REM We have collected the amount of sounds to make in PLAYER0,FLAG2, so now each time we subtract 1, we play a sound.
REM DISPLAY_VARIABLE(PLAYER0,FLAG2)
IF(PLAYER0,FLAG2 > 0)
	REM for testing for ben 2
	NEXT_COMMAND_REUSABLE
	PLAY_MESSAGE(PLAYER0,SPEECH,"Wisdom.mp3")
	NEXT_COMMAND_REUSABLE
	ADD_TO_FLAG(PLAYER0,FLAG2,-1)
ENDIF

IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,3)
ENDIF
IF(PLAYER1,TIMER1 == 60)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,4)
ENDIF
IF(PLAYER1,TIMER1 == 40)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,5)
ENDIF
IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,6)
ENDIF
IF(PLAYER1,TIMER1 == 100)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,7)
ENDIF
IF(PLAYER1,TIMER1 == 140)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,8)
ENDIF
IF(PLAYER1,TIMER1 == 120)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,9)
ENDIF

IF(PLAYER1,TIMER1 == 120)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,18)
ENDIF

IF(PLAYER1,TIMER1 == 80)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,19)
ENDIF

IF(PLAYER1,TIMER1 == 20)
	NEXT_COMMAND_REUSABLE
	CREATE_EFFECT(47,20)
ENDIF

IF(PLAYER1,TIMER1 > 160)
	IF(PLAYER1,FLAG1 ==1)
		NEXT_COMMAND_REUSABLE
		SET_TIMER(PLAYER1,TIMER1)
	ENDIF
ENDIF

IF(PLAYER0,SKELETON > 2)
NEXT_COMMAND_REUSABLE
SET_GAME_RULE(PrisonSkeletonChance,0)
ENDIF

IF(PLAYER0,SKELETON <2)
NEXT_COMMAND_REUSABLE
SET_GAME_RULE(PrisonSkeletonChance,100)
ENDIF

if(player_good, AVATAR == 0)
	SET_FLAG(PLAYER1,FLAG1,2)
ENDIF

IF(PLAYER_GOOD,DUNGEON_DESTROYED == 1)
	SET_FLAG(PLAYER1,FLAG1,2)
ENDIF

if(player_good, GUARD == 0)
	if(player_good, AVATAR == 0)
		IF(PLAYER_GOOD,DUNGEON_DESTROYED == 1)
			REM "Well done. Extinction everywhere. I like it."
			DISPLAY_OBJECTIVE(24,ALL_PLAYERS)
			win_game
		ENDIF
	ENDIF
endif
